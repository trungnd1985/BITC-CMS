@model BITC.CMS.Data.Entity.Project

@{
    ViewBag.Title = Model.ProjectID > 0 ? Model.ProjectName : "Project Detail";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

@helper RenderProjectImages(string _source)
{
    <div id="divProjectImages">
        @if (!string.IsNullOrWhiteSpace(_source))
        {
            var arr = _source.Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries);

            for (int i = 0; i < arr.Length; i++)
            {
                <img src="@arr[i]" />
            }

        }
    </div>
}

<div class="col-md-12">
    <form class="form-horizontal validate-form" method="post">
        @Html.AntiForgeryToken()
        <div class="form-body">
            <div class="form-group">
                @Html.LabelFor(m => m.ProjectName, new { @class = "control-label col-md-2" })
                <div class="col-md-10 focus">
                    @Html.EditorFor(m => m.ProjectName)
                    @Html.ValidationMessageFor(m => m.ProjectName)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.ProjectImages, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.HiddenFor(m => m.ProjectImages)
                    @RenderProjectImages(Model.ProjectImages)
                    @{Html.RenderAction("MediaPopup", "Media", new { _target = "#divProjectImages" }); }
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Description, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.Description)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Location, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.Location)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Year, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.Year)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.SortOrder, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.SortOrder)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.IsFeatured, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.IsFeatured)
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Inactive, new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(m => m.Inactive)
                </div>
            </div>
        </div>
        <div class="form-actions fluid">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-primary">@CommonResource.Save</button>
                @Html.ActionLink(CommonResource.Cancel, "Index", "Project", null, new { @class = "btn btn-default" })
            </div>
        </div>
    </form>
</div>
@section Script{
    <script src='@Url.Content("~/Areas/Admin/assets/scripts/projectController.js")'></script>
    <script type="text/javascript">
        project.init();
        media.insert(function () {
            alert(1);
        });
    </script>
}